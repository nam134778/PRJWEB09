<!DOCTYPE html>
<html>
    <head>
        <title>PRJWEB | Login Page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Assistant:400,700" rel="stylesheet"><link rel="stylesheet" href="./style.css">
    </head>

    <body ng-app="myApp">
        <section class='login' id='login' style="width: 400px; ">
            <div class='head'>
            <h1 class='company' style="margin-top: -10px;">PRJWEB09</h1>
            </div>
            <p class='msg' style="font-size: 25px; margin-top: -20px;">Welcome!</p>
            <div class='form'>
              <form>
            <input type="text" placeholder='Username' class='text' id='email' name="email" required><br>
            <input type="password" placeholder='password' class='password' name="password" id="password"><br>
            <a href="#" class='btn-login' id='signin' type="submit" name="signin" style="margin-top: 100px;">Login</a>
            <a href="signup.html" class="forgot">Sign Up</a> </br></br>
            <a href="forgotpass.html" class="forgot" style="margin-top: -20px;">Forgot password?</a>
              </form>
            </div>
          </section>
        <!-- <div>
            <h1>Đăng nhập</h1>

            <input type="text"      id="email"    name="email"    placeholder="Email"    />
            <input type="password"  id="password" name="password" placeholder="Mật khẩu" />
            <input type="submit"    id="signin"   name="signin"   value="Đăng nhập" />
            <a href="signup.html">Chưa có tài khoản? Đăng ký</a> </br></br>
            <a href="forgotpass.html">Quên mật khẩu?</a>
        </div> -->
    </body>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
        import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";

        import { getAuth, signInWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";

           
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyAgXRktPnpQ_tToW7tXQdPlxSXRf9_VK88",
          authDomain: "prjweb-d2e8d.firebaseapp.com",
          databaseURL: "https://prjweb-d2e8d-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "prjweb-d2e8d",
          storageBucket: "prjweb-d2e8d.appspot.com",
          messagingSenderId: "722705639877",
          appId: "1:722705639877:web:4cfedddcf5ec0e82fb83ac",
          measurementId: "G-K50Z8KJNX7"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth();

        signin.addEventListener('click', (e) => {
            var email       = document.getElementById('email').value;
            var password    = document.getElementById('password').value;

            //             sendEmailVerification(auth.currentUser)
            // .then(() => {
            //     // Email verification sent!
            //     // ...
            //     alert('Email Sent');
            // });

            signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                // Signed in 
                const user = userCredential.user;
                localStorage.setItem("email", email);
                alert('User Logged in');
                window.location.href = "mainpage.html";
                // ...
            })
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                // ..
                alert(errorMessage);
            });   
        })
        
      </script>
      
<!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js">
    var app2 = angular.module("myApp", ["ngRoute"]); 
    app2.config(function($routeProvider) {
    $routeProvider
    .when("/", {
        templateUrl : "index.html"
    })
    .when("/home-page", {
        templateUrl : "mainpage.html"
    })
    });
</script> -->


</html>